<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.0.2, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- 
This manual is for GNU tar (version
1.34, 4 February 2021), which creates and extracts files
from archives.

Copyright Â© 1992, 1994-1997, 1999-2001, 2003-2017, 2021
Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License", with the
Front-Cover Texts being "A GNU Manual", and with the Back-Cover Texts
as in (a) below.  A copy of the license is included in the section
entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual." -->
<title>Integrity (GNU tar 1.34)</title>

<meta name="description" content="Integrity (GNU tar 1.34)">
<meta name="keywords" content="Integrity (GNU tar 1.34)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index-of-Command-Line-Options.html" rel="index" title="Index of Command Line Options">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Security.html" rel="up" title="Security">
<link href="Live-untrusted-data.html" rel="next" title="Live untrusted data">
<link href="Privacy.html" rel="prev" title="Privacy">


</head>

<body lang="en">
<div class="subsection-level-extent" id="Integrity">
<div class="nav-panel">
<p>
Next: <a href="Live-untrusted-data.html" accesskey="n" rel="next">Dealing with Live Untrusted Data</a>, Previous: <a href="Privacy.html" accesskey="p" rel="prev">Privacy</a>, Up: <a href="Security.html" accesskey="u" rel="up">Security</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index-of-Command-Line-Options.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="Integrity-1">10.2.2 Integrity</h4>

<p>When creating archives, take care that they are not writable by a
untrusted user; otherwise, that user could modify the archive, and
when you later extract from the archive you will get incorrect data.
</p>
<p>When <code class="command">tar</code> extracts from an archive, by default it writes into
files relative to the working directory.  If the archive was generated
by an untrusted user, that user therefore can write into any file
under the working directory.  If the working directory contains a
symbolic link to another directory, the untrusted user can also write
into any file under the referenced directory.  When extracting from an
untrusted archive, it is therefore good practice to create an empty
directory and run <code class="command">tar</code> in that directory.
</p>
<p>When extracting from two or more untrusted archives, each one should
be extracted independently, into different empty directories.
Otherwise, the first archive could create a symbolic link into an area
outside the working directory, and the second one could follow the
link and overwrite data that is not under the working directory.  For
example, when restoring from a series of incremental dumps, the
archives should have been created by a trusted process, as otherwise
the incremental restores might alter data outside the working
directory.
</p>
<p>If you use the <samp class="option">--absolute-names</samp> (<samp class="option">-P</samp>) option when
extracting, <code class="command">tar</code> respects any file names in the archive, even
file names that begin with <samp class="file">/</samp> or contain <samp class="file">..</samp>.  As this
lets the archive overwrite any file in your system that you can write,
the <samp class="option">--absolute-names</samp> (<samp class="option">-P</samp>) option should be used only
for trusted archives.
</p>
<p>Conversely, with the <samp class="option">--keep-old-files</samp> (<samp class="option">-k</samp>) and
<samp class="option">--skip-old-files</samp> options, <code class="command">tar</code> refuses to replace
existing files when extracting.  The difference between the two
options is that the former treats existing files as errors whereas the
latter just silently ignores them.
</p>
<p>Finally, with the <samp class="option">--no-overwrite-dir</samp> option, <code class="command">tar</code>
refuses to replace the permissions or ownership of already-existing
directories.  These options may help when extracting from untrusted
archives.
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Live-untrusted-data.html">Dealing with Live Untrusted Data</a>, Previous: <a href="Privacy.html">Privacy</a>, Up: <a href="Security.html">Security</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index-of-Command-Line-Options.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
