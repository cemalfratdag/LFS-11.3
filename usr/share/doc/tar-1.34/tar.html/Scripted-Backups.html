<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.0.2, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- 
This manual is for GNU tar (version
1.34, 4 February 2021), which creates and extracts files
from archives.

Copyright Â© 1992, 1994-1997, 1999-2001, 2003-2017, 2021
Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License", with the
Front-Cover Texts being "A GNU Manual", and with the Back-Cover Texts
as in (a) below.  A copy of the license is included in the section
entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual." -->
<title>Scripted Backups (GNU tar 1.34)</title>

<meta name="description" content="Scripted Backups (GNU tar 1.34)">
<meta name="keywords" content="Scripted Backups (GNU tar 1.34)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index-of-Command-Line-Options.html" rel="index" title="Index of Command Line Options">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Backups.html" rel="up" title="Backups">
<link href="Scripted-Restoration.html" rel="next" title="Scripted Restoration">
<link href="Backup-Parameters.html" rel="prev" title="Backup Parameters">
<style type="text/css">
<!--
div.example {margin-left: 3.2em}
-->
</style>


</head>

<body lang="en">
<div class="section-level-extent" id="Scripted-Backups">
<div class="nav-panel">
<p>
Next: <a href="Scripted-Restoration.html" accesskey="n" rel="next">Using the Restore Script</a>, Previous: <a href="Backup-Parameters.html" accesskey="p" rel="prev">Setting Parameters for Backups and Restoration</a>, Up: <a href="Backups.html" accesskey="u" rel="up">Performing Backups and Restoring Files</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index-of-Command-Line-Options.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Using-the-Backup-Scripts">5.5 Using the Backup Scripts</h3>

<p>The syntax for running a backup script is:
</p>
<div class="example smallexample">
<pre class="example-preformatted">backup --level=<var class="var">level</var> --time=<var class="var">time</var>
</pre></div>

<p>The <samp class="option">--level</samp> option requests the dump level.  Thus, to produce
a full dump, specify <code class="code">--level=0</code> (this is the default, so
<samp class="option">--level</samp> may be omitted if its value is
<code class="code">0</code>)<a class="footnote" id="DOCF14" href="#FOOT14"><sup>14</sup></a>.
</p>
<p>The <samp class="option">--time</samp> option determines when should the backup be
run.  <var class="var">Time</var> may take three forms:
</p>
<dl class="table">
<dt><var class="var">hh</var>:<var class="var">mm</var></dt>
<dd>
<p>The dump must be run at <var class="var">hh</var> hours <var class="var">mm</var> minutes.
</p>
</dd>
<dt><var class="var">hh</var></dt>
<dd>
<p>The dump must be run at <var class="var">hh</var> hours.
</p>
</dd>
<dt>now</dt>
<dd>
<p>The dump must be run immediately.
</p></dd>
</dl>

<p>You should start a script with a tape or disk mounted.  Once you
start a script, it prompts you for new tapes or disks as it
needs them.  Media volumes don&rsquo;t have to correspond to archive
files &mdash; a multi-volume archive can be started in the middle of a
tape that already contains the end of another multi-volume archive.
The <code class="code">restore</code> script prompts for media by its archive volume,
so to avoid an error message you should keep track of which tape
(or disk) contains which volume of the archive (see <a class="pxref" href="Scripted-Restoration.html">Using the Restore Script</a>).
</p>
<p>The backup scripts write two files on the file system.  The first is a
record file in <samp class="file">/etc/tar-backup/</samp>, which is used by the scripts
to store and retrieve information about which files were dumped.  This
file is not meant to be read by humans, and should not be deleted by
them.  See <a class="xref" href="Snapshot-Files.html">Format of the Incremental Snapshot Files</a>, for a more detailed explanation of this
file.
</p>
<p>The second file is a log file containing the names of the file systems
and files dumped, what time the backup was made, and any error
messages that were generated, as well as how much space was left in
the media volume after the last volume of the archive was written.
You should check this log file after every backup.  The file name is
<samp class="file">log-<var class="var">mm-dd-yyyy</var>-level-<var class="var">n</var></samp>, where <var class="var">mm-dd-yyyy</var>
represents current date, and <var class="var">n</var> represents current dump level number.
</p>
<p>The script also prints the name of each system being dumped to the
standard output.
</p>
<p>Following is the full list of options accepted by <code class="code">backup</code>
script:
</p>
<dl class="table">
<dt><samp class="option">-l <var class="var">level</var></samp></dt>
<dt><samp class="option">--level=<var class="var">level</var></samp></dt>
<dd><p>Do backup level <var class="var">level</var> (default 0).
</p>
</dd>
<dt><samp class="option">-f</samp></dt>
<dt><samp class="option">--force</samp></dt>
<dd><p>Force backup even if today&rsquo;s log file already exists.
</p>
</dd>
<dt><samp class="option">-v[<var class="var">level</var>]</samp></dt>
<dt><samp class="option">--verbose[=<var class="var">level</var>]</samp></dt>
<dd><p>Set verbosity level.  The higher the level is, the more debugging
information will be output during execution.  Default <var class="var">level</var>
is 100, which means the highest debugging level.
</p>
</dd>
<dt><samp class="option">-t <var class="var">start-time</var></samp></dt>
<dt><samp class="option">--time=<var class="var">start-time</var></samp></dt>
<dd><p>Wait till <var class="var">time</var>, then do backup.
</p>
</dd>
<dt><samp class="option">-h</samp></dt>
<dt><samp class="option">--help</samp></dt>
<dd><p>Display short help message and exit.
</p>
</dd>
<dt><samp class="option">-V</samp></dt>
<dt><samp class="option">--version</samp></dt>
<dd><p>Display information about the program&rsquo;s name, version, origin and legal
status, all on standard output, and then exit successfully.
</p></dd>
</dl>


</div>
<div class="footnotes-segment">
<hr>
<h4 class="footnotes-heading">Footnotes</h4>

<h5 class="footnote-body-heading"><a id="FOOT14" href="#DOCF14">(14)</a></h5>
<p>For backward compatibility, the <code class="code">backup</code> will also
try to deduce the requested dump level from the name of the
script itself.  If the name consists of a string &lsquo;<samp class="samp">level-</samp>&rsquo;
followed by a single decimal digit, that digit is taken as
the dump level number.  Thus, you may create a link from <code class="code">backup</code>
to <code class="code">level-1</code> and then run <code class="code">level-1</code> whenever you need to
create a level one dump.</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Scripted-Restoration.html">Using the Restore Script</a>, Previous: <a href="Backup-Parameters.html">Setting Parameters for Backups and Restoration</a>, Up: <a href="Backups.html">Performing Backups and Restoring Files</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index-of-Command-Line-Options.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
