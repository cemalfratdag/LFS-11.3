<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.0.2, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- 
This manual is for GNU tar (version
1.34, 4 February 2021), which creates and extracts files
from archives.

Copyright Â© 1992, 1994-1997, 1999-2001, 2003-2017, 2021
Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License", with the
Front-Cover Texts being "A GNU Manual", and with the Back-Cover Texts
as in (a) below.  A copy of the license is included in the section
entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual." -->
<title>Generate Mode (GNU tar 1.34)</title>

<meta name="description" content="Generate Mode (GNU tar 1.34)">
<meta name="keywords" content="Generate Mode (GNU tar 1.34)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index-of-Command-Line-Options.html" rel="index" title="Index of Command Line Options">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Genfile.html" rel="up" title="Genfile">
<link href="Status-Mode.html" rel="next" title="Status Mode">
<style type="text/css">
<!--
div.example {margin-left: 3.2em}
-->
</style>


</head>

<body lang="en">
<div class="appendixsec-level-extent" id="Generate-Mode">
<div class="nav-panel">
<p>
Next: <a href="Status-Mode.html" accesskey="n" rel="next">Status Mode</a>, Up: <a href="Genfile.html" accesskey="u" rel="up">Genfile</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index-of-Command-Line-Options.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="appendixsec" id="Generate-Mode-1">F.1 Generate Mode</h3>

<a class="index-entry-id" id="index-Generate-Mode_002c-genfile"></a>
<a class="index-entry-id" id="index-genfile_002c-generate-mode"></a>
<a class="index-entry-id" id="index-genfile_002c-create-file"></a>
<p>In this mode <code class="command">genfile</code> creates a data file for the test
suite. The size of the file is given with the <samp class="option">--length</samp>
(<samp class="option">-l</samp>) option. By default the file contents is written to the
standard output, this can be changed using <samp class="option">--file</samp>
(<samp class="option">-f</samp>) command line option. Thus, the following two commands
are equivalent:
</p>
<div class="example smallexample">
<div class="group"><pre class="example-preformatted">genfile --length 100 &gt; outfile
genfile --length 100 --file outfile
</pre></div></div>

<p>If <samp class="option">--length</samp> is not given, <code class="command">genfile</code> will
generate an empty (zero-length) file.
</p>
<a class="index-entry-id" id="index-genfile_002c-seeking-to-a-given-offset"></a>
<p>The command line option <samp class="option">--seek=<var class="var">N</var></samp> istructs <code class="command">genfile</code>
to skip the given number of bytes (<var class="var">N</var>) in the output file before
writing to it.  It is similar to the <samp class="option">seek=<var class="var">N</var></samp> of the
<code class="command">dd</code> utility.
</p>
<a class="index-entry-id" id="index-genfile_002c-reading-a-list-of-file-names"></a>
<p>You can instruct <code class="command">genfile</code> to create several files at one
go, by giving it <samp class="option">--files-from</samp> (<samp class="option">-T</samp>) option followed
by a name of file containing a list of file names. Using dash
(&lsquo;<samp class="samp">-</samp>&rsquo;) instead of the file name causes <code class="command">genfile</code> to read
file list from the standard input. For example:
</p>
<div class="example smallexample">
<div class="group"><pre class="example-preformatted"># Read file names from file <samp class="file">file.list</samp>
genfile --files-from file.list
# Read file names from standard input
genfile --files-from -
</pre></div></div>

<a class="index-entry-id" id="index-File-lists-separated-by-NUL-characters"></a>
<p>The list file is supposed to contain one file name per line. To
use file lists separated by ASCII NUL character, use <samp class="option">--null</samp>
(<samp class="option">-0</samp>) command line option:
</p>
<div class="example smallexample">
<pre class="example-preformatted">genfile --null --files-from file.list
</pre></div>

<a class="index-entry-id" id="index-pattern_002c-genfile"></a>
<p>The default data pattern for filling the generated file consists
of first 256 letters of ASCII code, repeated enough times to fill the
entire file. This behavior can be changed with <samp class="option">--pattern</samp>
option. This option takes a mandatory argument, specifying pattern
name to use. Currently two patterns are implemented:
</p>
<dl class="table">
<dt><samp class="option">--pattern=default</samp></dt>
<dd><p>The default pattern as described above.
</p>
</dd>
<dt><samp class="option">--pattern=zero</samp></dt>
<dd><p>Fills the file with zeroes.
</p></dd>
</dl>

<p>If no file name was given, the program exits with the code
<code class="code">0</code>.  Otherwise, it exits with <code class="code">0</code> only if it was able to
create a file of the specified length.
</p>
<a class="index-entry-id" id="index-Sparse-files_002c-creating-using-genfile"></a>
<a class="index-entry-id" id="index-genfile_002c-creating-sparse-files"></a>
<p>Special option <samp class="option">--sparse</samp> (<samp class="option">-s</samp>) instructs
<code class="command">genfile</code> to create a sparse file. Sparse files consist of
<em class="dfn">data fragments</em>, separated by <em class="dfn">holes</em> or blocks of zeros. On
many operating systems, actual disk storage is not allocated for
holes, but they are counted in the length of the file. To create a
sparse file, <code class="command">genfile</code> should know where to put data fragments,
and what data to use to fill them. So, when <samp class="option">--sparse</samp> is given
the rest of the command line specifies a so-called <em class="dfn">file map</em>.
</p>
<p>The file map consists of any number of <em class="dfn">fragment
descriptors</em>. Each descriptor is composed of two values: a number,
specifying fragment offset from the end of the previous fragment or,
for the very first fragment, from the beginning of the file, and
<em class="dfn">contents string</em>, that specifies the pattern to fill the fragment
with. File offset can be suffixed with the following quantifiers:
</p>
<dl class="table">
<dt>&lsquo;<samp class="samp">k</samp>&rsquo;</dt>
<dt>&lsquo;<samp class="samp">K</samp>&rsquo;</dt>
<dd><p>The number is expressed in kilobytes.
</p></dd>
<dt>&lsquo;<samp class="samp">m</samp>&rsquo;</dt>
<dt>&lsquo;<samp class="samp">M</samp>&rsquo;</dt>
<dd><p>The number is expressed in megabytes.
</p></dd>
<dt>&lsquo;<samp class="samp">g</samp>&rsquo;</dt>
<dt>&lsquo;<samp class="samp">G</samp>&rsquo;</dt>
<dd><p>The number is expressed in gigabytes.
</p></dd>
</dl>

<p>Contents string can be either a fragment size or a pattern.
Fragment size is a decimal number, prefixed with an equals sign.  It
can be suffixed with a quantifier, as discussed above.  If fragment
size is given, the fragment of that size will be filled with the
currently selected pattern (see <a class="pxref" href="#Generate-Mode">&ndash;pattern</a>) and
written to the file.  
</p>
<p>A pattern is a string of arbitrary ASCII characters.  For each
of them, <code class="command">genfile</code> will generate a <em class="dfn">block</em> of data,
filled with that character and will write it to the fragment. The size
of block is given by <samp class="option">--block-size</samp> option. It defaults to 512.
Thus, if pattern consists of <var class="var">n</var> characters, the resulting file
fragment will contain <code class="code"><var class="var">n</var>*<var class="var">block-size</var></code> bytes of data.
</p>
<p>The last fragment descriptor can have only file offset part. In this
case <code class="command">genfile</code> will create a hole at the end of the file up to
the given offset.
</p>
<p>A dash appearing as a fragment descriptor instructs
<code class="command">genfile</code> to read file map from the standard input.  Each line
of input should consist of fragment offset and contents string,
separated by any amount of whitespace.
</p>
<p>For example, consider the following invocation:
</p>
<div class="example smallexample">
<pre class="example-preformatted">genfile --sparse --file sparsefile 0 ABCD 1M EFGHI 2000K
</pre></div>

<p>It will create 3101184-bytes long file of the following structure:
</p>
<table class="multitable">
<tbody><tr><td width="35%">Offset</td><td width="20%">Length</td><td width="45%">Contents</td></tr>
<tr><td width="35%">0</td><td width="20%">4*512=2048</td><td width="45%">Four 512-byte blocks, filled with
letters &lsquo;<samp class="samp">A</samp>&rsquo;, &lsquo;<samp class="samp">B</samp>&rsquo;, &lsquo;<samp class="samp">C</samp>&rsquo; and &lsquo;<samp class="samp">D</samp>&rsquo;.</td></tr>
<tr><td width="35%">2048</td><td width="20%">1046528</td><td width="45%">Zero bytes</td></tr>
<tr><td width="35%">1050624</td><td width="20%">5*512=2560</td><td width="45%">Five blocks, filled with letters
&lsquo;<samp class="samp">E</samp>&rsquo;, &lsquo;<samp class="samp">F</samp>&rsquo;, &lsquo;<samp class="samp">G</samp>&rsquo;, &lsquo;<samp class="samp">H</samp>&rsquo;, &lsquo;<samp class="samp">I</samp>&rsquo;.</td></tr>
<tr><td width="35%">1053184</td><td width="20%">2048000</td><td width="45%">Zero bytes</td></tr>
</tbody>
</table>

<a class="index-entry-id" id="index-_002d_002dquite_002c-option"></a>
<p>The exit code of <code class="command">genfile --sparse</code> command is <code class="code">0</code>
only if created file is actually sparse.  If it is not, the
appropriate error message is displayed and the command exists with
code <code class="code">1</code>.  The <samp class="option">--quite</samp> (<samp class="option">-q</samp>) option suppresses
this behavior.  If <samp class="option">--quite</samp> is given, <code class="command">genfile
--sparse</code> exits with code <code class="code">0</code> if it was able to create the file,
whether the resulting file is sparse or not.
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Status-Mode.html">Status Mode</a>, Up: <a href="Genfile.html">Genfile</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index-of-Command-Line-Options.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
