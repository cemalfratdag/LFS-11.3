<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.0.2, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- 
This manual is for GNU tar (version
1.34, 4 February 2021), which creates and extracts files
from archives.

Copyright Â© 1992, 1994-1997, 1999-2001, 2003-2017, 2021
Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License", with the
Front-Cover Texts being "A GNU Manual", and with the Back-Cover Texts
as in (a) below.  A copy of the license is included in the section
entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual." -->
<title>cpio (GNU tar 1.34)</title>

<meta name="description" content="cpio (GNU tar 1.34)">
<meta name="keywords" content="cpio (GNU tar 1.34)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index-of-Command-Line-Options.html" rel="index" title="Index of Command Line Options">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Formats.html" rel="up" title="Formats">
<link href="Portability.html" rel="prev" title="Portability">


</head>

<body lang="en">
<div class="section-level-extent" id="cpio">
<div class="nav-panel">
<p>
Previous: <a href="Portability.html" accesskey="p" rel="prev">Making <code class="command">tar</code> Archives More Portable</a>, Up: <a href="Formats.html" accesskey="u" rel="up">Controlling the Archive Format</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index-of-Command-Line-Options.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Comparison-of-tar-and-cpio">8.4 Comparison of <code class="command">tar</code> and <code class="command">cpio</code></h3>
<blockquote class="quotation">
<p><em class="emph">(This message will disappear, once this node revised.)</em>
</p></blockquote>



<p>The <code class="command">cpio</code> archive formats, like <code class="command">tar</code>, do have maximum
file name lengths.  The binary and old <abbr class="acronym">ASCII</abbr> formats have a maximum file
length of 256, and the new <abbr class="acronym">ASCII</abbr> and <abbr class="acronym">CRC ASCII</abbr> formats have a max
file length of 1024.  <abbr class="acronym">GNU</abbr> <code class="command">cpio</code> can read and write archives
with arbitrary file name lengths, but other <code class="command">cpio</code> implementations
may crash unexplainedly trying to read them.
</p>
<p><code class="command">tar</code> handles symbolic links in the form in which it comes in <abbr class="acronym">BSD</abbr>;
<code class="command">cpio</code> doesn&rsquo;t handle symbolic links in the form in which it comes
in System V prior to SVR4, and some vendors may have added symlinks
to their system without enhancing <code class="command">cpio</code> to know about them.
Others may have enhanced it in a way other than the way I did it
at Sun, and which was adopted by AT&amp;T (and which is, I think, also
present in the <code class="command">cpio</code> that Berkeley picked up from AT&amp;T and put
into a later <abbr class="acronym">BSD</abbr> release&mdash;I think I gave them my changes).
</p>
<p>(SVR4 does some funny stuff with <code class="command">tar</code>; basically, its <code class="command">cpio</code>
can handle <code class="command">tar</code> format input, and write it on output, and it
probably handles symbolic links.  They may not have bothered doing
anything to enhance <code class="command">tar</code> as a result.)
</p>
<p><code class="command">cpio</code> handles special files; traditional <code class="command">tar</code> doesn&rsquo;t.
</p>
<p><code class="command">tar</code> comes with V7, System III, System V, and <abbr class="acronym">BSD</abbr> source;
<code class="command">cpio</code> comes only with System III, System V, and later <abbr class="acronym">BSD</abbr>
(4.3-tahoe and later).
</p>
<p><code class="command">tar</code>&rsquo;s way of handling multiple hard links to a file can handle
file systems that support 32-bit i-numbers (e.g., the <abbr class="acronym">BSD</abbr> file system);
<code class="command">cpio</code>s way requires you to play some games (in its &ldquo;binary&rdquo;
format, i-numbers are only 16 bits, and in its &ldquo;portable <abbr class="acronym">ASCII</abbr>&rdquo; format,
they&rsquo;re 18 bits&mdash;it would have to play games with the &quot;file system <abbr class="acronym">ID</abbr>&quot;
field of the header to make sure that the file system <abbr class="acronym">ID</abbr>/i-number pairs
of different files were always different), and I don&rsquo;t know which
<code class="command">cpio</code>s, if any, play those games.  Those that don&rsquo;t might get
confused and think two files are the same file when they&rsquo;re not, and
make hard links between them.
</p>
<p><code class="command">tar</code>s way of handling multiple hard links to a file places only
one copy of the link on the tape, but the name attached to that copy
is the <em class="emph">only</em> one you can use to retrieve the file; <code class="command">cpio</code>s
way puts one copy for every link, but you can retrieve it using any
of the names.
</p>
<blockquote class="quotation">
<p>What type of check sum (if any) is used, and how is this calculated.
</p></blockquote>

<p>See the attached manual pages for <code class="command">tar</code> and <code class="command">cpio</code> format.
<code class="command">tar</code> uses a checksum which is the sum of all the bytes in the
<code class="command">tar</code> header for a file; <code class="command">cpio</code> uses no checksum.
</p>
<blockquote class="quotation">
<p>If anyone knows why <code class="command">cpio</code> was made when <code class="command">tar</code> was present
at the unix scene,
</p></blockquote>

<p>It wasn&rsquo;t.  <code class="command">cpio</code> first showed up in PWB/UNIX 1.0; no
generally-available version of UNIX had <code class="command">tar</code> at the time.  I don&rsquo;t
know whether any version that was generally available <em class="emph">within AT&amp;T</em>
had <code class="command">tar</code>, or, if so, whether the people within AT&amp;T who did
<code class="command">cpio</code> knew about it.
</p>
<p>On restore, if there is a corruption on a tape <code class="command">tar</code> will stop at
that point, while <code class="command">cpio</code> will skip over it and try to restore the
rest of the files.
</p>
<p>The main difference is just in the command syntax and header format.
</p>
<p><code class="command">tar</code> is a little more tape-oriented in that everything is blocked
to start on a record boundary.
</p>
<blockquote class="quotation">
<p>Is there any differences between the ability to recover crashed
archives between the two of them.  (Is there any chance of recovering
crashed archives at all.)
</p></blockquote>

<p>Theoretically it should be easier under <code class="command">tar</code> since the blocking
lets you find a header with some variation of &lsquo;<samp class="samp">dd skip=<var class="var">nn</var></samp>&rsquo;.
However, modern <code class="command">cpio</code>&rsquo;s and variations have an option to just
search for the next file header after an error with a reasonable chance
of resyncing.  However, lots of tape driver software won&rsquo;t allow you to
continue past a media error which should be the only reason for getting
out of sync unless a file changed sizes while you were writing the
archive.
</p>
<blockquote class="quotation">
<p>If anyone knows why <code class="command">cpio</code> was made when <code class="command">tar</code> was present
at the unix scene, please tell me about this too.
</p></blockquote>

<p>Probably because it is more media efficient (by not blocking everything
and using only the space needed for the headers where <code class="command">tar</code>
always uses 512 bytes per file header) and it knows how to archive
special files.
</p>
<p>You might want to look at the freely available alternatives.  The
major ones are <code class="command">afio</code>, <abbr class="acronym">GNU</abbr> <code class="command">tar</code>, and
<code class="command">pax</code>, each of which have their own extensions with some
backwards compatibility.
</p>
<p>Sparse files were <code class="command">tar</code>red as sparse files (which you can
easily test, because the resulting archive gets smaller, and
<abbr class="acronym">GNU</abbr> <code class="command">cpio</code> can no longer read it).
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Previous: <a href="Portability.html">Making <code class="command">tar</code> Archives More Portable</a>, Up: <a href="Formats.html">Controlling the Archive Format</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index-of-Command-Line-Options.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
