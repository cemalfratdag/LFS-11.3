<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.0.2, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- 
This manual is for GNU tar (version
1.34, 4 February 2021), which creates and extracts files
from archives.

Copyright Â© 1992, 1994-1997, 1999-2001, 2003-2017, 2021
Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License", with the
Front-Cover Texts being "A GNU Manual", and with the Back-Cover Texts
as in (a) below.  A copy of the license is included in the section
entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual." -->
<title>Dealing with Old Files (GNU tar 1.34)</title>

<meta name="description" content="Dealing with Old Files (GNU tar 1.34)">
<meta name="keywords" content="Dealing with Old Files (GNU tar 1.34)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index-of-Command-Line-Options.html" rel="index" title="Index of Command Line Options">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Writing.html" rel="up" title="Writing">
<link href="Overwrite-Old-Files.html" rel="next" title="Overwrite Old Files">
<style type="text/css">
<!--
div.example {margin-left: 3.2em}
kbd.kbd {font-style: oblique}
span.r {font-family: initial; font-weight: normal; font-style: normal}
-->
</style>


</head>

<body lang="en">
<div class="unnumberedsubsubsec-level-extent" id="Dealing-with-Old-Files">
<div class="nav-panel">
<p>
Next: <a href="Overwrite-Old-Files.html" accesskey="n" rel="next">Overwrite Old Files</a>, Up: <a href="Writing.html" accesskey="u" rel="up">Changing How <code class="command">tar</code> Writes Files</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index-of-Command-Line-Options.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="unnumberedsubsubsec" id="Options-Controlling-the-Overwriting-of-Existing-Files">Options Controlling the Overwriting of Existing Files</h4>

<a class="index-entry-id" id="index-overwrite_002ddir_002c-introduced"></a>
<p>When extracting files, if <code class="command">tar</code> discovers that the extracted
file already exists, it normally replaces the file by removing it before
extracting it, to prevent confusion in the presence of hard or symbolic
links.  (If the existing file is a symbolic link, it is removed, not
followed.)  However, if a directory cannot be removed because it is
nonempty, <code class="command">tar</code> normally overwrites its metadata (ownership,
permission, etc.).  The <samp class="option">--overwrite-dir</samp> option enables this
default behavior.  To be more cautious and preserve the metadata of
such a directory, use the <samp class="option">--no-overwrite-dir</samp> option.
</p>
<a class="index-entry-id" id="index-Overwriting-old-files_002c-prevention"></a>
<a class="index-entry-id" id="index-keep_002dold_002dfiles_002c-introduced"></a>
<p>To be even more cautious and prevent existing files from being replaced, use
the <samp class="option">--keep-old-files</samp> (<samp class="option">-k</samp>) option.  It causes
<code class="command">tar</code> to refuse to replace or update a file that already
exists, i.e., a file with the same name as an archive member prevents
extraction of that archive member.  Instead, it reports an error.  For
example:
</p>
<div class="example">
<pre class="example-preformatted">$ <kbd class="kbd">ls</kbd>
blues
$ <kbd class="kbd">tar -x -k -f archive.tar</kbd>
tar: blues: Cannot open: File exists
tar: Exiting with failure status due to previous errors
</pre></div>

<a class="index-entry-id" id="index-skip_002dold_002dfiles_002c-introduced"></a>
<p>If you wish to preserve old files untouched, but don&rsquo;t want
<code class="command">tar</code> to treat them as errors, use the
<samp class="option">--skip-old-files</samp> option.  This option causes <code class="command">tar</code> to
silently skip extracting over existing files.
</p>
<a class="index-entry-id" id="index-overwrite_002c-introduced"></a>
<p>To be more aggressive about altering existing files, use the
<samp class="option">--overwrite</samp> option.  It causes <code class="command">tar</code> to overwrite
existing files and to follow existing symbolic links when extracting.
</p>
<a class="index-entry-id" id="index-Protecting-old-files"></a>
<p>Some people argue that <abbr class="acronym">GNU</abbr> <code class="command">tar</code> should not hesitate
to overwrite files with other files when extracting.  When extracting
a <code class="command">tar</code> archive, they expect to see a faithful copy of the
state of the file system when the archive was created.  It is debatable
that this would always be a proper behavior.  For example, suppose one
has an archive in which <samp class="file">usr/local</samp> is a link to
<samp class="file">usr/local2</samp>.  Since then, maybe the site removed the link and
renamed the whole hierarchy from <samp class="file">/usr/local2</samp> to
<samp class="file">/usr/local</samp>.  Such things happen all the time.  I guess it would
not be welcome at all that <abbr class="acronym">GNU</abbr> <code class="command">tar</code> removes the
whole hierarchy just to make room for the link to be reinstated
(unless it <em class="emph">also</em> simultaneously restores the full
<samp class="file">/usr/local2</samp>, of course!)  <abbr class="acronym">GNU</abbr> <code class="command">tar</code> is indeed
able to remove a whole hierarchy to reestablish a symbolic link, for
example, but <em class="emph">only if</em> <samp class="option">--recursive-unlink</samp> is specified
to allow this behavior.  In any case, single files are silently
removed.
</p>
<a class="index-entry-id" id="index-unlink_002dfirst_002c-introduced"></a>
<p>Finally, the <samp class="option">--unlink-first</samp> (<samp class="option">-U</samp>) option can improve performance in
some cases by causing <code class="command">tar</code> to remove files unconditionally
before extracting them.
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Overwrite-Old-Files.html">Overwrite Old Files</a>, Up: <a href="Writing.html">Changing How <code class="command">tar</code> Writes Files</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index-of-Command-Line-Options.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
