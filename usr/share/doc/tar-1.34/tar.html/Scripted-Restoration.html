<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.0.2, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- 
This manual is for GNU tar (version
1.34, 4 February 2021), which creates and extracts files
from archives.

Copyright Â© 1992, 1994-1997, 1999-2001, 2003-2017, 2021
Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License", with the
Front-Cover Texts being "A GNU Manual", and with the Back-Cover Texts
as in (a) below.  A copy of the license is included in the section
entitled "GNU Free Documentation License".

(a) The FSF's Back-Cover Text is: "You have the freedom to
copy and modify this GNU manual." -->
<title>Scripted Restoration (GNU tar 1.34)</title>

<meta name="description" content="Scripted Restoration (GNU tar 1.34)">
<meta name="keywords" content="Scripted Restoration (GNU tar 1.34)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index-of-Command-Line-Options.html" rel="index" title="Index of Command Line Options">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Backups.html" rel="up" title="Backups">
<link href="Scripted-Backups.html" rel="prev" title="Scripted Backups">
<style type="text/css">
<!--
div.example {margin-left: 3.2em}
-->
</style>


</head>

<body lang="en">
<div class="section-level-extent" id="Scripted-Restoration">
<div class="nav-panel">
<p>
Previous: <a href="Scripted-Backups.html" accesskey="p" rel="prev">Using the Backup Scripts</a>, Up: <a href="Backups.html" accesskey="u" rel="up">Performing Backups and Restoring Files</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index-of-Command-Line-Options.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Using-the-Restore-Script">5.6 Using the Restore Script</h3>

<p>To restore files that were archived using a scripted backup, use the
<code class="code">restore</code> script.  Its usage is quite straightforward.  In the
simplest form, invoke <code class="code">restore --all</code>, it will
then restore all the file systems and files specified in
<samp class="file">backup-specs</samp> (see <a class="pxref" href="General_002dPurpose-Variables.html">BACKUP_DIRS</a>).
</p>
<p>You may select the file systems (and/or files) to restore by
giving <code class="code">restore</code> a list of <em class="dfn">patterns</em> in its command
line.  For example, running
</p>
<div class="example smallexample">
<pre class="example-preformatted">restore 'albert:*'
</pre></div>

<p>will restore all file systems on the machine &lsquo;<samp class="samp">albert</samp>&rsquo;.  A more
complicated example:
</p>
<div class="example smallexample">
<pre class="example-preformatted">restore 'albert:*' '*:/var'
</pre></div>

<p>This command will restore all file systems on the machine &lsquo;<samp class="samp">albert</samp>&rsquo;
as well as <samp class="file">/var</samp> file system on all machines.
</p>
<p>By default <code class="code">restore</code> will start restoring files from the lowest
available dump level (usually zero) and will continue through
all available dump levels.  There may be situations where such a
thorough restore is not necessary.  For example, you may wish to
restore only files from the recent level one backup.  To do so,
use <samp class="option">--level</samp> option, as shown in the example below:
</p>
<div class="example smallexample">
<pre class="example-preformatted">restore --level=1
</pre></div>

<p>The full list of options accepted by <code class="code">restore</code> follows:
</p>
<dl class="table">
<dt><samp class="option">-a</samp></dt>
<dt><samp class="option">--all</samp></dt>
<dd><p>Restore all file systems and files specified in <samp class="file">backup-specs</samp>.
</p>
</dd>
<dt><samp class="option">-l <var class="var">level</var></samp></dt>
<dt><samp class="option">--level=<var class="var">level</var></samp></dt>
<dd><p>Start restoring from the given backup level, instead of the default 0.
</p>
</dd>
<dt><samp class="option">-v[<var class="var">level</var>]</samp></dt>
<dt><samp class="option">--verbose[=<var class="var">level</var>]</samp></dt>
<dd><p>Set verbosity level.  The higher the level is, the more debugging
information will be output during execution.  Default <var class="var">level</var>
is 100, which means the highest debugging level.
</p>
</dd>
<dt><samp class="option">-h</samp></dt>
<dt><samp class="option">--help</samp></dt>
<dd><p>Display short help message and exit.
</p>
</dd>
<dt><samp class="option">-V</samp></dt>
<dt><samp class="option">--version</samp></dt>
<dd><p>Display information about the program&rsquo;s name, version, origin and legal
status, all on standard output, and then exit successfully.
</p></dd>
</dl>

<p>You should start the restore script with the media containing the
first volume of the archive mounted.  The script will prompt for other
volumes as they are needed.  If the archive is on tape, you don&rsquo;t need
to rewind the tape to to its beginning&mdash;if the tape head is
positioned past the beginning of the archive, the script will rewind
the tape as needed.  See <a class="xref" href="Tape-Positioning.html">Tape Positions and Tape Marks</a>, for a discussion of tape
positioning.
</p>
<blockquote class="quotation">
<p><strong class="strong">Warning:</strong> The script will delete files from the active file
system if they were not in the file system when the archive was made.
</p></blockquote>

<p>See <a class="xref" href="Incremental-Dumps.html">Using <code class="command">tar</code> to Perform Incremental Dumps</a>, for an explanation of how the script makes
that determination.
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Previous: <a href="Scripted-Backups.html">Using the Backup Scripts</a>, Up: <a href="Backups.html">Performing Backups and Restoring Files</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index-of-Command-Line-Options.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
