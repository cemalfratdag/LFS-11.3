<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.0.2, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This manual documents how to install and use the Multiple Precision
Floating-Point Reliable Library, version 4.2.0.

Copyright 1991, 1993-2023 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.2 or any later
version published by the Free Software Foundation; with no Invariant Sections,
with no Front-Cover Texts, and with no Back-Cover Texts.  A copy of the
license is included in GNU Free Documentation License. -->
<title>Type and Macro Changes (GNU MPFR 4.2.0)</title>

<meta name="description" content="How to install and use GNU MPFR, a library for reliable multiple precision
floating-point arithmetic, version 4.2.0.">
<meta name="keywords" content="Type and Macro Changes (GNU MPFR 4.2.0)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Concept-Index.html" rel="index" title="Concept Index">
<link href="API-Compatibility.html" rel="up" title="API Compatibility">
<link href="Added-Functions.html" rel="next" title="Added Functions">
<link href="API-Compatibility.html" rel="prev" title="API Compatibility">
<style type="text/css">
<!--
div.example {margin-left: 3.2em}
-->
</style>


</head>

<body lang="en">
<div class="section-level-extent" id="Type-and-Macro-Changes">
<div class="nav-panel">
<p>
Next: <a href="Added-Functions.html" accesskey="n" rel="next">Added Functions</a>, Previous: <a href="API-Compatibility.html" accesskey="p" rel="prev">API Compatibility</a>, Up: <a href="API-Compatibility.html" accesskey="u" rel="up">API Compatibility</a>   [<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Type-and-Macro-Changes-1">6.1 Type and Macro Changes</h3>

<p>The official type for exponent values changed from <code class="code">mp_exp_t</code> to
<code class="code">mpfr_exp_t</code> in MPFR 3.0.  The type <code class="code">mp_exp_t</code> will remain
available as it comes from GMP (with a different meaning).  These types
are currently the same (<code class="code">mpfr_exp_t</code> is defined as <code class="code">mp_exp_t</code>
with <code class="code">typedef</code>), so that programs can still use <code class="code">mp_exp_t</code>;
but this may change in the future.
Alternatively, using the following code after including <samp class="file">mpfr.h</samp>
will work with official MPFR versions, as <code class="code">mpfr_exp_t</code> was never
defined in MPFR 2.x:
</p><div class="example">
<pre class="example-preformatted">#if MPFR_VERSION_MAJOR &lt; 3
typedef mp_exp_t mpfr_exp_t;
#endif
</pre></div>

<p>The official types for precision values and for rounding modes
respectively changed from <code class="code">mp_prec_t</code> and <code class="code">mp_rnd_t</code>
to <code class="code">mpfr_prec_t</code> and <code class="code">mpfr_rnd_t</code> in MPFR 3.0.  This
change was actually done a long time ago in MPFR, at least since
MPFR 2.2.0, with the following code in <samp class="file">mpfr.h</samp>:
</p><div class="example">
<pre class="example-preformatted">#ifndef mp_rnd_t
# define mp_rnd_t  mpfr_rnd_t
#endif
#ifndef mp_prec_t
# define mp_prec_t mpfr_prec_t
#endif
</pre></div>
<p>This means that it is safe to use the new official types
<code class="code">mpfr_prec_t</code> and <code class="code">mpfr_rnd_t</code> in your programs.
The types <code class="code">mp_prec_t</code> and <code class="code">mp_rnd_t</code> (defined
in MPFR only) may be removed in the future, as the prefix
<code class="code">mp_</code> is reserved by GMP.
</p>
<p>The precision type <code class="code">mpfr_prec_t</code> (<code class="code">mp_prec_t</code>) was unsigned
before MPFR 3.0; it is now signed.  <code class="code">MPFR_PREC_MAX</code> has not
changed, though.  Indeed the MPFR code requires that <code class="code">MPFR_PREC_MAX</code> be
representable in the exponent type, which may have the same size as
<code class="code">mpfr_prec_t</code> but has always been signed.
The consequence is that valid code that does not assume anything about
the signedness of <code class="code">mpfr_prec_t</code> should work with past and new MPFR
versions.
This change was useful as the use of unsigned types tends to convert
signed values to unsigned ones in expressions due to the usual arithmetic
conversions, which can yield incorrect results if a negative value is
converted in such a way.
Warning!  A program assuming (intentionally or not) that
<code class="code">mpfr_prec_t</code> is signed may be affected by this problem when
it is built and run against MPFR 2.x.
</p>
<p>The rounding modes <code class="code">GMP_RNDx</code> were renamed to <code class="code">MPFR_RNDx</code>
in MPFR 3.0. However, the old names <code class="code">GMP_RNDx</code> have been kept for
compatibility (this might change in future versions), using:
</p><div class="example">
<pre class="example-preformatted">#define GMP_RNDN MPFR_RNDN
#define GMP_RNDZ MPFR_RNDZ
#define GMP_RNDU MPFR_RNDU
#define GMP_RNDD MPFR_RNDD
</pre></div>
<p>The rounding mode “round away from zero” (<code class="code">MPFR_RNDA</code>) was added in
MPFR 3.0 (however, no rounding mode <code class="code">GMP_RNDA</code> exists).
Faithful rounding (<code class="code">MPFR_RNDF</code>) was added in MPFR 4.0, but
currently, it is partially supported.
</p>
<p>The flags-related macros, whose name starts with <code class="code">MPFR_FLAGS_</code>,
were added in MPFR 4.0 (for the new functions <code class="code">mpfr_flags_clear</code>,
<code class="code">mpfr_flags_restore</code>, <code class="code">mpfr_flags_set</code> and <code class="code">mpfr_flags_test</code>,
in particular).
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Added-Functions.html">Added Functions</a>, Previous: <a href="API-Compatibility.html">API Compatibility</a>, Up: <a href="API-Compatibility.html">API Compatibility</a>   [<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
