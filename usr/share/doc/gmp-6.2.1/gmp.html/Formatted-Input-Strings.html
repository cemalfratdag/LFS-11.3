<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.0.2, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<!-- This manual describes how to install and use the GNU multiple precision
arithmetic library, version 6.2.1.

Copyright 1991, 1993-2016, 2018-2020 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.3 or any later
version published by the Free Software Foundation; with no Invariant Sections,
with the Front-Cover Texts being "A GNU Manual", and with the Back-Cover
Texts being "You have freedom to copy and modify this GNU Manual, like GNU
software".  A copy of the license is included in
GNU Free Documentation License. -->
<title>Formatted Input Strings (GNU MP 6.2.1)</title>

<meta name="description" content="How to install and use the GNU multiple precision arithmetic library, version 6.2.1.">
<meta name="keywords" content="Formatted Input Strings (GNU MP 6.2.1)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Concept-Index.html" rel="index" title="Concept Index">
<link href="Formatted-Input.html" rel="up" title="Formatted Input">
<link href="Formatted-Input-Functions.html" rel="next" title="Formatted Input Functions">
<link href="Formatted-Input.html" rel="prev" title="Formatted Input">
<style type="text/css">
<!--
div.example {margin-left: 3.2em}
-->
</style>


</head>

<body lang="en">
<div class="section-level-extent" id="Formatted-Input-Strings">
<div class="nav-panel">
<p>
Next: <a href="Formatted-Input-Functions.html" accesskey="n" rel="next">Formatted Input Functions</a>, Previous: <a href="Formatted-Input.html" accesskey="p" rel="prev">Formatted Input</a>, Up: <a href="Formatted-Input.html" accesskey="u" rel="up">Formatted Input</a> &nbsp; [<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Formatted-Input-Strings-1">11.1 Formatted Input Strings</h3>

<p><code class="code">gmp_scanf</code> and friends accept format strings similar to the standard C
<code class="code">scanf</code> (see <a data-manual="libc" href="https://www.gnu.org/software/libc/manual/html_node/Formatted-Input.html#Formatted-Input">Formatted Input</a> in <cite class="cite">The GNU C
Library Reference Manual</cite>).  A format specification is of the form
</p>
<div class="example">
<pre class="example-preformatted">% [flags] [width] [type] conv
</pre></div>

<p>GMP adds types &lsquo;<samp class="samp">Z</samp>&rsquo;, &lsquo;<samp class="samp">Q</samp>&rsquo; and &lsquo;<samp class="samp">F</samp>&rsquo; for <code class="code">mpz_t</code>, <code class="code">mpq_t</code>
and <code class="code">mpf_t</code> respectively.  &lsquo;<samp class="samp">Z</samp>&rsquo; and &lsquo;<samp class="samp">Q</samp>&rsquo; behave like integers.
&lsquo;<samp class="samp">Q</samp>&rsquo; will read a &lsquo;<samp class="samp">/</samp>&rsquo; and a denominator, if present.  &lsquo;<samp class="samp">F</samp>&rsquo; behaves
like a float.
</p>
<p>GMP variables don&rsquo;t require an <code class="code">&amp;</code> when passed to <code class="code">gmp_scanf</code>, since
they&rsquo;re already &ldquo;call-by-reference&rdquo;.  For example,
</p>
<div class="example">
<pre class="example-preformatted">/* to read say &quot;a(5) = 1234&quot; */
int   n;
mpz_t z;
gmp_scanf (&quot;a(%d) = %Zd\n&quot;, &amp;n, z);

mpq_t q1, q2;
gmp_sscanf (&quot;0377 + 0x10/0x11&quot;, &quot;%Qi + %Qi&quot;, q1, q2);

/* to read say &quot;topleft (1.55,-2.66)&quot; */
mpf_t x, y;
char  buf[32];
gmp_scanf (&quot;%31s (%Ff,%Ff)&quot;, buf, x, y);
</pre></div>

<p>All the standard C <code class="code">scanf</code> types behave the same as in the C library
<code class="code">scanf</code>, and can be freely intermixed with the GMP extensions.  In the
current implementation the standard parts of the format string are simply
handed to <code class="code">scanf</code> and only the GMP extensions handled directly.
</p>
<p>The flags accepted are as follows.  &lsquo;<samp class="samp">a</samp>&rsquo; and &lsquo;<samp class="samp">'</samp>&rsquo; will depend on
support from the C library, and &lsquo;<samp class="samp">'</samp>&rsquo; cannot be used with GMP types.
</p>
<blockquote class="quotation">
<table class="multitable">
<tbody><tr><td><code class="code">*</code></td><td>read but don&rsquo;t store</td></tr>
<tr><td><code class="code">a</code></td><td>allocate a buffer (string conversions)</td></tr>
<tr><td><code class="code">'</code></td><td>grouped digits, GLIBC style (not GMP types)</td></tr>
</tbody>
</table>
</blockquote>

<p>The standard types accepted are as follows.  &lsquo;<samp class="samp">h</samp>&rsquo; and &lsquo;<samp class="samp">l</samp>&rsquo; are
portable, the rest will depend on the compiler (or include files) for the type
and the C library for the input.
</p>
<blockquote class="quotation">
<table class="multitable">
<tbody><tr><td><code class="code">h</code></td><td><code class="code">short</code></td></tr>
<tr><td><code class="code">hh</code></td><td><code class="code">char</code></td></tr>
<tr><td><code class="code">j</code></td><td><code class="code">intmax_t</code> or <code class="code">uintmax_t</code></td></tr>
<tr><td><code class="code">l</code></td><td><code class="code">long int</code>, <code class="code">double</code> or <code class="code">wchar_t</code></td></tr>
<tr><td><code class="code">ll</code></td><td><code class="code">long long</code></td></tr>
<tr><td><code class="code">L</code></td><td><code class="code">long double</code></td></tr>
<tr><td><code class="code">q</code></td><td><code class="code">quad_t</code> or <code class="code">u_quad_t</code></td></tr>
<tr><td><code class="code">t</code></td><td><code class="code">ptrdiff_t</code></td></tr>
<tr><td><code class="code">z</code></td><td><code class="code">size_t</code></td></tr>
</tbody>
</table>
</blockquote>

<p>The GMP types are
</p>
<blockquote class="quotation">
<table class="multitable">
<tbody><tr><td><code class="code">F</code></td><td><code class="code">mpf_t</code>, float conversions</td></tr>
<tr><td><code class="code">Q</code></td><td><code class="code">mpq_t</code>, integer conversions</td></tr>
<tr><td><code class="code">Z</code></td><td><code class="code">mpz_t</code>, integer conversions</td></tr>
</tbody>
</table>
</blockquote>

<p>The conversions accepted are as follows.  &lsquo;<samp class="samp">p</samp>&rsquo; and &lsquo;<samp class="samp">[</samp>&rsquo; will depend on
support from the C library, the rest are standard.
</p>
<blockquote class="quotation">
<table class="multitable">
<tbody><tr><td><code class="code">c</code></td><td>character or characters</td></tr>
<tr><td><code class="code">d</code></td><td>decimal integer</td></tr>
<tr><td><code class="code">e</code> <code class="code">E</code> <code class="code">f</code> <code class="code">g</code> <code class="code">G</code></td><td>float</td></tr>
<tr><td><code class="code">i</code></td><td>integer with base indicator</td></tr>
<tr><td><code class="code">n</code></td><td>characters read so far</td></tr>
<tr><td><code class="code">o</code></td><td>octal integer</td></tr>
<tr><td><code class="code">p</code></td><td>pointer</td></tr>
<tr><td><code class="code">s</code></td><td>string of non-whitespace characters</td></tr>
<tr><td><code class="code">u</code></td><td>decimal integer</td></tr>
<tr><td><code class="code">x</code> <code class="code">X</code></td><td>hex integer</td></tr>
<tr><td><code class="code">[</code></td><td>string of characters in a set</td></tr>
</tbody>
</table>
</blockquote>

<p>&lsquo;<samp class="samp">e</samp>&rsquo;, &lsquo;<samp class="samp">E</samp>&rsquo;, &lsquo;<samp class="samp">f</samp>&rsquo;, &lsquo;<samp class="samp">g</samp>&rsquo; and &lsquo;<samp class="samp">G</samp>&rsquo; are identical, they all
read either fixed point or scientific format, and either upper or lower case
&lsquo;<samp class="samp">e</samp>&rsquo; for the exponent in scientific format.
</p>
<p>C99 style hex float format (<code class="code">printf %a</code>, see <a class="pxref" href="Formatted-Output-Strings.html">Format Strings</a>) is always accepted for <code class="code">mpf_t</code>, but for the standard float
types it will depend on the C library.
</p>
<p>&lsquo;<samp class="samp">x</samp>&rsquo; and &lsquo;<samp class="samp">X</samp>&rsquo; are identical, both accept both upper and lower case
hexadecimal.
</p>
<p>&lsquo;<samp class="samp">o</samp>&rsquo;, &lsquo;<samp class="samp">u</samp>&rsquo;, &lsquo;<samp class="samp">x</samp>&rsquo; and &lsquo;<samp class="samp">X</samp>&rsquo; all read positive or negative
values.  For the standard C types these are described as &ldquo;unsigned&rdquo;
conversions, but that merely affects certain overflow handling, negatives are
still allowed (per <code class="code">strtoul</code>, see <a data-manual="libc" href="https://www.gnu.org/software/libc/manual/html_node/Parsing-of-Integers.html#Parsing-of-Integers">Parsing of
Integers</a> in <cite class="cite">The GNU C Library Reference Manual</cite>).  For GMP types there are
no overflows, so &lsquo;<samp class="samp">d</samp>&rsquo; and &lsquo;<samp class="samp">u</samp>&rsquo; are identical.
</p>
<p>&lsquo;<samp class="samp">Q</samp>&rsquo; type reads the numerator and (optional) denominator as given.  If the
value might not be in canonical form then <code class="code">mpq_canonicalize</code> must be
called before using it in any calculations (see <a class="pxref" href="Rational-Number-Functions.html">Rational Number Functions</a>).
</p>
<p>&lsquo;<samp class="samp">Qi</samp>&rsquo; will read a base specification separately for the numerator and
denominator.  For example &lsquo;<samp class="samp">0x10/11</samp>&rsquo; would be 16/11, whereas
&lsquo;<samp class="samp">0x10/0x11</samp>&rsquo; would be 16/17.
</p>
<p>&lsquo;<samp class="samp">n</samp>&rsquo; can be used with any of the types above, even the GMP types.
&lsquo;<samp class="samp">*</samp>&rsquo; to suppress assignment is allowed, though in that case it would do
nothing at all.
</p>
<p>Other conversions or types that might be accepted by the C library
<code class="code">scanf</code> cannot be used through <code class="code">gmp_scanf</code>.
</p>
<p>Whitespace is read and discarded before a field, except for &lsquo;<samp class="samp">c</samp>&rsquo; and
&lsquo;<samp class="samp">[</samp>&rsquo; conversions.
</p>
<p>For float conversions, the decimal point character (or string) expected is
taken from the current locale settings on systems which provide
<code class="code">localeconv</code> (see <a data-manual="libc" href="https://www.gnu.org/software/libc/manual/html_node/Locales.html#Locales">Locales and Internationalization</a> in <cite class="cite">The GNU C Library Reference Manual</cite>).  The C library will normally do the same
for standard float input.
</p>
<p>The format string is only interpreted as plain <code class="code">char</code>s, multibyte
characters are not recognised.  Perhaps this will change in the future.
</p>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Formatted-Input-Functions.html">Formatted Input Functions</a>, Previous: <a href="Formatted-Input.html">Formatted Input</a>, Up: <a href="Formatted-Input.html">Formatted Input</a> &nbsp; [<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
