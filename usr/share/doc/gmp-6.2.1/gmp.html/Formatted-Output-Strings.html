<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.0.2, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<!-- This manual describes how to install and use the GNU multiple precision
arithmetic library, version 6.2.1.

Copyright 1991, 1993-2016, 2018-2020 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.3 or any later
version published by the Free Software Foundation; with no Invariant Sections,
with the Front-Cover Texts being "A GNU Manual", and with the Back-Cover
Texts being "You have freedom to copy and modify this GNU Manual, like GNU
software".  A copy of the license is included in
GNU Free Documentation License. -->
<title>Formatted Output Strings (GNU MP 6.2.1)</title>

<meta name="description" content="How to install and use the GNU multiple precision arithmetic library, version 6.2.1.">
<meta name="keywords" content="Formatted Output Strings (GNU MP 6.2.1)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Concept-Index.html" rel="index" title="Concept Index">
<link href="Formatted-Output.html" rel="up" title="Formatted Output">
<link href="Formatted-Output-Functions.html" rel="next" title="Formatted Output Functions">
<link href="Formatted-Output.html" rel="prev" title="Formatted Output">
<style type="text/css">
<!--
div.example {margin-left: 3.2em}
-->
</style>


</head>

<body lang="en">
<div class="section-level-extent" id="Formatted-Output-Strings">
<div class="nav-panel">
<p>
Next: <a href="Formatted-Output-Functions.html" accesskey="n" rel="next">Functions</a>, Previous: <a href="Formatted-Output.html" accesskey="p" rel="prev">Formatted Output</a>, Up: <a href="Formatted-Output.html" accesskey="u" rel="up">Formatted Output</a> &nbsp; [<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Format-Strings">10.1 Format Strings</h3>

<p><code class="code">gmp_printf</code> and friends accept format strings similar to the standard C
<code class="code">printf</code> (see <a data-manual="libc" href="https://www.gnu.org/software/libc/manual/html_node/Formatted-Output.html#Formatted-Output">Formatted Output</a> in <cite class="cite">The GNU C
Library Reference Manual</cite>).  A format specification is of the form
</p>
<div class="example">
<pre class="example-preformatted">% [flags] [width] [.[precision]] [type] conv
</pre></div>

<p>GMP adds types &lsquo;<samp class="samp">Z</samp>&rsquo;, &lsquo;<samp class="samp">Q</samp>&rsquo; and &lsquo;<samp class="samp">F</samp>&rsquo; for <code class="code">mpz_t</code>, <code class="code">mpq_t</code>
and <code class="code">mpf_t</code> respectively, &lsquo;<samp class="samp">M</samp>&rsquo; for <code class="code">mp_limb_t</code>, and &lsquo;<samp class="samp">N</samp>&rsquo; for
an <code class="code">mp_limb_t</code> array.  &lsquo;<samp class="samp">Z</samp>&rsquo;, &lsquo;<samp class="samp">Q</samp>&rsquo;, &lsquo;<samp class="samp">M</samp>&rsquo; and &lsquo;<samp class="samp">N</samp>&rsquo; behave
like integers.  &lsquo;<samp class="samp">Q</samp>&rsquo; will print a &lsquo;<samp class="samp">/</samp>&rsquo; and a denominator, if needed.
&lsquo;<samp class="samp">F</samp>&rsquo; behaves like a float.  For example,
</p>
<div class="example">
<pre class="example-preformatted">mpz_t z;
gmp_printf (&quot;%s is an mpz %Zd\n&quot;, &quot;here&quot;, z);

mpq_t q;
gmp_printf (&quot;a hex rational: %#40Qx\n&quot;, q);

mpf_t f;
int   n;
gmp_printf (&quot;fixed point mpf %.*Ff with %d digits\n&quot;, n, f, n);

mp_limb_t l;
gmp_printf (&quot;limb %Mu\n&quot;, l);

const mp_limb_t *ptr;
mp_size_t       size;
gmp_printf (&quot;limb array %Nx\n&quot;, ptr, size);
</pre></div>

<p>For &lsquo;<samp class="samp">N</samp>&rsquo; the limbs are expected least significant first, as per the
<code class="code">mpn</code> functions (see <a class="pxref" href="Low_002dlevel-Functions.html">Low-level Functions</a>).  A negative size can be
given to print the value as a negative.
</p>
<p>All the standard C <code class="code">printf</code> types behave the same as the C library
<code class="code">printf</code>, and can be freely intermixed with the GMP extensions.  In the
current implementation the standard parts of the format string are simply
handed to <code class="code">printf</code> and only the GMP extensions handled directly.
</p>
<p>The flags accepted are as follows.  GLIBC style &lsquo;<samp class="samp">'</samp>&rsquo; is only for the
standard C types (not the GMP types), and only if the C library supports it.
</p>
<blockquote class="quotation">
<table class="multitable">
<tbody><tr><td><code class="code">0</code></td><td>pad with zeros (rather than spaces)</td></tr>
<tr><td><code class="code">#</code></td><td>show the base with &lsquo;<samp class="samp">0x</samp>&rsquo;, &lsquo;<samp class="samp">0X</samp>&rsquo; or &lsquo;<samp class="samp">0</samp>&rsquo;</td></tr>
<tr><td><code class="code">+</code></td><td>always show a sign</td></tr>
<tr><td>(space)</td><td>show a space or a &lsquo;<samp class="samp">-</samp>&rsquo; sign</td></tr>
<tr><td><code class="code">'</code></td><td>group digits, GLIBC style (not GMP types)</td></tr>
</tbody>
</table>
</blockquote>

<p>The optional width and precision can be given as a number within the format
string, or as a &lsquo;<samp class="samp">*</samp>&rsquo; to take an extra parameter of type <code class="code">int</code>, the
same as the standard <code class="code">printf</code>.
</p>
<p>The standard types accepted are as follows.  &lsquo;<samp class="samp">h</samp>&rsquo; and &lsquo;<samp class="samp">l</samp>&rsquo; are
portable, the rest will depend on the compiler (or include files) for the type
and the C library for the output.
</p>
<blockquote class="quotation">
<table class="multitable">
<tbody><tr><td><code class="code">h</code></td><td><code class="code">short</code></td></tr>
<tr><td><code class="code">hh</code></td><td><code class="code">char</code></td></tr>
<tr><td><code class="code">j</code></td><td><code class="code">intmax_t</code> or <code class="code">uintmax_t</code></td></tr>
<tr><td><code class="code">l</code></td><td><code class="code">long</code> or <code class="code">wchar_t</code></td></tr>
<tr><td><code class="code">ll</code></td><td><code class="code">long long</code></td></tr>
<tr><td><code class="code">L</code></td><td><code class="code">long double</code></td></tr>
<tr><td><code class="code">q</code></td><td><code class="code">quad_t</code> or <code class="code">u_quad_t</code></td></tr>
<tr><td><code class="code">t</code></td><td><code class="code">ptrdiff_t</code></td></tr>
<tr><td><code class="code">z</code></td><td><code class="code">size_t</code></td></tr>
</tbody>
</table>
</blockquote>

<p>The GMP types are
</p>
<blockquote class="quotation">
<table class="multitable">
<tbody><tr><td><code class="code">F</code></td><td><code class="code">mpf_t</code>, float conversions</td></tr>
<tr><td><code class="code">Q</code></td><td><code class="code">mpq_t</code>, integer conversions</td></tr>
<tr><td><code class="code">M</code></td><td><code class="code">mp_limb_t</code>, integer conversions</td></tr>
<tr><td><code class="code">N</code></td><td><code class="code">mp_limb_t</code> array, integer conversions</td></tr>
<tr><td><code class="code">Z</code></td><td><code class="code">mpz_t</code>, integer conversions</td></tr>
</tbody>
</table>
</blockquote>

<p>The conversions accepted are as follows.  &lsquo;<samp class="samp">a</samp>&rsquo; and &lsquo;<samp class="samp">A</samp>&rsquo; are always
supported for <code class="code">mpf_t</code> but depend on the C library for standard C float
types.  &lsquo;<samp class="samp">m</samp>&rsquo; and &lsquo;<samp class="samp">p</samp>&rsquo; depend on the C library.
</p>
<blockquote class="quotation">
<table class="multitable">
<tbody><tr><td><code class="code">a</code> <code class="code">A</code></td><td>hex floats, C99 style</td></tr>
<tr><td><code class="code">c</code></td><td>character</td></tr>
<tr><td><code class="code">d</code></td><td>decimal integer</td></tr>
<tr><td><code class="code">e</code> <code class="code">E</code></td><td>scientific format float</td></tr>
<tr><td><code class="code">f</code></td><td>fixed point float</td></tr>
<tr><td><code class="code">i</code></td><td>same as <code class="code">d</code></td></tr>
<tr><td><code class="code">g</code> <code class="code">G</code></td><td>fixed or scientific float</td></tr>
<tr><td><code class="code">m</code></td><td><code class="code">strerror</code> string, GLIBC style</td></tr>
<tr><td><code class="code">n</code></td><td>store characters written so far</td></tr>
<tr><td><code class="code">o</code></td><td>octal integer</td></tr>
<tr><td><code class="code">p</code></td><td>pointer</td></tr>
<tr><td><code class="code">s</code></td><td>string</td></tr>
<tr><td><code class="code">u</code></td><td>unsigned integer</td></tr>
<tr><td><code class="code">x</code> <code class="code">X</code></td><td>hex integer</td></tr>
</tbody>
</table>
</blockquote>

<p>&lsquo;<samp class="samp">o</samp>&rsquo;, &lsquo;<samp class="samp">x</samp>&rsquo; and &lsquo;<samp class="samp">X</samp>&rsquo; are unsigned for the standard C types, but for
types &lsquo;<samp class="samp">Z</samp>&rsquo;, &lsquo;<samp class="samp">Q</samp>&rsquo; and &lsquo;<samp class="samp">N</samp>&rsquo; they are signed.  &lsquo;<samp class="samp">u</samp>&rsquo; is not
meaningful for &lsquo;<samp class="samp">Z</samp>&rsquo;, &lsquo;<samp class="samp">Q</samp>&rsquo; and &lsquo;<samp class="samp">N</samp>&rsquo;.
</p>
<p>&lsquo;<samp class="samp">M</samp>&rsquo; is a proxy for the C library &lsquo;<samp class="samp">l</samp>&rsquo; or &lsquo;<samp class="samp">L</samp>&rsquo;, according to the
size of <code class="code">mp_limb_t</code>.  Unsigned conversions will be usual, but a signed
conversion can be used and will interpret the value as a twos complement
negative.
</p>
<p>&lsquo;<samp class="samp">n</samp>&rsquo; can be used with any type, even the GMP types.
</p>
<p>Other types or conversions that might be accepted by the C library
<code class="code">printf</code> cannot be used through <code class="code">gmp_printf</code>, this includes for
instance extensions registered with GLIBC <code class="code">register_printf_function</code>.
Also currently there&rsquo;s no support for POSIX &lsquo;<samp class="samp">$</samp>&rsquo; style numbered arguments
(perhaps this will be added in the future).
</p>
<p>The precision field has its usual meaning for integer &lsquo;<samp class="samp">Z</samp>&rsquo; and float
&lsquo;<samp class="samp">F</samp>&rsquo; types, but is currently undefined for &lsquo;<samp class="samp">Q</samp>&rsquo; and should not be used
with that.
</p>
<p><code class="code">mpf_t</code> conversions only ever generate as many digits as can be
accurately represented by the operand, the same as <code class="code">mpf_get_str</code> does.
Zeros will be used if necessary to pad to the requested precision.  This
happens even for an &lsquo;<samp class="samp">f</samp>&rsquo; conversion of an <code class="code">mpf_t</code> which is an
integer, for instance <em class="math">2^1024<!-- /@w --></em> in an <code class="code">mpf_t</code> of 128 bits
precision will only produce about 40 digits, then pad with zeros to the
decimal point.  An empty precision field like &lsquo;<samp class="samp">%.Fe</samp>&rsquo; or &lsquo;<samp class="samp">%.Ff</samp>&rsquo; can
be used to specifically request just the significant digits.  Without any dot
and thus no precision field, a precision value of 6 will be used.  Note that
these rules mean that &lsquo;<samp class="samp">%Ff</samp>&rsquo;, &lsquo;<samp class="samp">%.Ff</samp>&rsquo;, and &lsquo;<samp class="samp">%.0Ff</samp>&rsquo; will all be
different.
</p>
<p>The decimal point character (or string) is taken from the current locale
settings on systems which provide <code class="code">localeconv</code> (see <a data-manual="libc" href="https://www.gnu.org/software/libc/manual/html_node/Locales.html#Locales">Locales
and Internationalization</a> in <cite class="cite">The GNU C Library Reference Manual</cite>).  The C
library will normally do the same for standard float output.
</p>
<p>The format string is only interpreted as plain <code class="code">char</code>s, multibyte
characters are not recognised.  Perhaps this will change in the future.
</p>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Formatted-Output-Functions.html">Functions</a>, Previous: <a href="Formatted-Output.html">Formatted Output</a>, Up: <a href="Formatted-Output.html">Formatted Output</a> &nbsp; [<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
